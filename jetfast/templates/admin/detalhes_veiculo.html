{% extends 'admin/base_site.html' %}
{% load static %}

{% block title %}Detalhes do Veículo - {{ veiculo.placa }} - JetFast{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">JetFast</a></h1>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<style>
    /* Definição de Cores */
    :root {
        --accent-color: #fdb02e;
        --accent-dark: #e59a1f;
        --admin-black: #000; /* Cor padrão do header do Django ou use #000 */
    }

    /* Mantém o Header padrão/preto */
    #header {
        background: #000 !important; /* Cor azulada padrão do Django ou mude para black */
    }

    /* Seções (Modules) com a cor de destaque #fdb02e */
    .module h2 {
        background: var(--accent-color) !important;
        color: #000 !important;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* Botões com a cor de destaque */
    .button, input[type=submit], .submit-row a.default {
        background: var(--accent-color) !important;
        color: #000 !important;
        font-weight: bold;
        border: none;
    }

    .button:hover {
        background: var(--accent-dark) !important;
        color: #000 !important;
    }

    /* Ajustes das Tabelas */
    .info-table th {
        background: #fdfdfd;
        color: #555;
        text-align: left;
        width: 20%;
        padding: 12px;
        border-bottom: 1px solid #eee;
    }

    .info-table td {
        padding: 12px;
        border-bottom: 1px solid #eee;
    }

    .history-table thead th {
        background: #f8f8f8;
        border-bottom: 2px solid var(--accent-color);
        padding: 12px;
        text-align: left;
    }
</style>
{% endblock %}

{% block content %}
<div id="content-main">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1>Ficha do Veículo: <span style="color: var(--accent-dark);">{{ veiculo.placa }}</span></h1>
        <a href="{% url 'admin:jetfast_veiculo_changelist' %}" class="button">Voltar</a>
    </div>

    <div class="module">
        <h2>Dados do Proprietário e Veículo</h2>
        <table class="info-table" style="width: 100%; border-collapse: collapse;">
            <tr>
                <th>Proprietário:</th>
                <td>{{ veiculo.nome }}</td>
                <th>Telefone:</th>
                <td>{{ veiculo.telefone|default:"Não informado" }}</td>
            </tr>
            <tr>
                <th>Marca/Modelo:</th>
                <td>{{ veiculo.modelo_veiculo.marca }} - {{ veiculo.modelo_veiculo.nome }}</td>
                <th>Categoria:</th>
                <td>{{ veiculo.categoria.nome }}</td>
            </tr>
            <tr>
                <th>Data de Cadastro:</th>
                <td colspan="3">{{ veiculo.data_cadastro|date:"d/m/Y \à\s H:i" }}</td>
            </tr>
        </table>
    </div>

    <div class="module" style="margin-top: 30px;">
        <h2>Histórico Completo de Lavagens</h2>
        <table class="history-table" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Chegada</th>
                    <th>Entrada Pista</th>
                    <th>Saída Final</th>
                    <th>Colab. Externa</th>
                    <th>Colab. Interna</th>
                </tr>
            </thead>
            <tbody>
                {% for lavagem in lavagens_realizadas %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>{{ lavagem.horario_chegada|date:"d/m/Y" }}</strong></td>
                    <td style="padding: 12px;">{{ lavagem.horario_chegada|date:"H:i" }}</td>
                    <td style="padding: 12px;">{{ lavagem.horario_pista|date:"H:i"|default:"---" }}</td>
                    <td style="padding: 12px;">{{ lavagem.horario_saida|date:"H:i"|default:"---" }}</td>
                    <td style="padding: 12px;">{{ lavagem.colaborador_externa.nome|default:"---" }}</td>
                    <td style="padding: 12px;">{{ lavagem.colaborador_interna.nome|default:"---" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="padding: 30px; text-align: center; color: #666;">
                        Este veículo ainda não possui registros de lavagem.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}